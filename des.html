<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Destinations - Myanmar Travel</title>

<!-- Google Font -->
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;700&display=swap" rel="stylesheet"/>

<!-- Bootstrap CSS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"/>
<!-- Your external CSS file -->
<link rel="stylesheet" href="./index.css"/>


<style>
:root{
  --brand:#198754;
  --ink:#1f2937;
  --muted:#6b7280;
  --ring:#e5e7eb;
  --card:#ffffff;
  --bg:#f7f7fb;
}

html, body {
  background: var(--bg);
  color: var(--ink);
  font-family: 'Poppins', sans-serif;
}
  /* Navbar hover effects */

/* --- Navbar Custom Style --- */
/* Modern clean travel-style navbar */
.navbar ul{
  list-style-type: none;
  padding: 0px;
  margin:0px;

}

.navbar .nav-link {
  color:white; /* default color */
  text-decoration: none;
  padding:15px;
  display:block;
  text-align: center;
  }
  
  .navbar .nav-link:hover {
  background-color: goldenrod /* bright green hover color */
  }

/*.background-title {
  font-size:200px;
  font-weight: bold;
  font-family:'Times New Roman', Times, serif;
  color:rgb(247, 209, 21);}*/


.logo-circle{
  width:48px;
  height:48px;
  border-radius:50%;
  background-color:#fff;
  display:flex;
  align-items:center;
  justify-content:center;
  overflow:hidden;
  border:2px solid whitesmoke;
}
.logo-circle img{ width:100%; height:100%; object-fit:cover; }

.page-hero{
  position: relative;
  padding: 80px 0 60px;
  text-align:center;
  background:
    radial-gradient(1200px 300px at 50% -80px, rgba(25,135,84,.18), transparent 60%),
    linear-gradient(180deg, rgba(0,0,0,0.35), rgba(0,0,0,0)),
    url('image/B01.jpg') center/cover no-repeat;
}
.page-hero h1{
  font-weight:700;
  font-size:clamp(1.8rem, 4vw, 2.6rem);
  text-shadow: 0 2px 16px rgba(0,0,0,.35);
}

.section-title{
  font-weight:700;
  letter-spacing:.4px;
  text-align:center;
  margin-bottom: 1.25rem;
}

.region-card, .place-card {
  border: 1px solid var(--ring);
  border-radius: 18px;
  overflow: hidden;
  background: var(--card);
  transition: transform .28s ease, box-shadow .28s ease;
}
.region-card:hover, .place-card:hover {
  transform: translateY(-6px);
  box-shadow: 0 18px 40px -18px rgba(0,0,0,.3);
}
.region-card img, .place-card img { height: 220px; object-fit: cover; }
.card-body{ padding:16px 18px 18px; }
.card-title{ font-weight:700; margin-bottom:.35rem; }
.card-text{ color:var(--muted); margin-bottom:.75rem; }

#searchDropdown{
  position:absolute;
  top:100%;
  left:0;
  width:100%;
  max-height:300px;
  overflow-y:auto;
  z-index:1000;
  display:none;
}
#searchDropdown li{ cursor:pointer; }
</style>
</head>
<body>

  <nav class="navbar navbar-expand-lg navbar-gray shadow-sm sticky-top" style="background: #fbf8f8">
    <div class="container">
      <!-- <a class="navbar-brand fw-bold" href="./index.html">ASME</a> -->
      <a class="navbar-brand d-flex align-items-center" href="./index.html">
        <div class="logo-circle me-2">
          <img src="./image/nav-logo.png" alt="Myanmar Travel Logo">
        </div>
        <span class="fw-bold ">MYANMAR TRAVEL</span>
      </a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#travelNavbar" aria-controls="travelNavbar" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
  
      <div class="collapse navbar-collapse" id="travelNavbar">
        <ul class="navbar-nav ms-auto" >
          <li class="nav-item"><a class="nav-link active" href="./index.html">Home</a></li>
          <li class="nav-item"><a class="nav-link active" href="./des.html">Destinations</a></li>
          <li class="nav-item"><a class="nav-link active" href="./Festivals.html">Festivals</a></li>
          <li class="nav-item"><a class="nav-link active" href="./Foods.html">Foods</a></li>
        </ul>
  
        <!-- prevent default submit on Enter -->
        <form class="d-flex position-relative" onsubmit="return false;">
          <input class="form-control me-2 rounded-pill" type="search"  id="searchInput"  placeholder="Search here..." autocomplete="off"  onfocus="this.style.border=`2px solid green`" style="border-color: green; padding:5px ; border:2px solid green">
          <!-- Dropdown search results -->
          <ul id="searchDropdown" class="list-group position-absolute w-100 shadow-sm"
              style="top:100%; left:0; z-index:1000; display:none; "></ul>
        </form>
      </div>
    </div>
  </nav>

<header class="page-hero">
  <div class="container">
    <h1 class="two-sentence">Discover the Beauty of Every Region in Myanmar</h1>
  </div>
</header>

<section class="py-5">
  <div class="container">
    <div class="soft-divider"></div>
    <div id="content"></div>
  </div>
</section>

<script>
let regionsData=[];
let destinations=[];
const content = document.getElementById("content");
const searchInput = document.getElementById("searchInput");
const searchDropdown = document.getElementById("searchDropdown");

fetch("des.json")
  .then(res=>res.json())
  .then(data=>{
    regionsData = data;
    data.forEach(region=>{
      destinations.push({...region, type:'region'});
      region.places?.forEach(place=> destinations.push({...place, type:'place', region: region.name}));
    });
    const regionFromURL = new URLSearchParams(window.location.search).get("region");
    if(regionFromURL && regionsData.some(r=>r.name===regionFromURL)) showPlaces(regionFromURL);
    else showRegions();
  })
  .catch(err=>content.innerHTML="<p>Failed to load destinations.</p>");

function showRegions(){
  content.innerHTML=`<h2 class="section-title">Find Your Next Destination</h2><div class="row g-4" id="regions-container"></div>`;
  const container=document.getElementById("regions-container");
  regionsData.forEach(region=>{
    const col=document.createElement("div");
    col.className="col-md-6 col-lg-4";
    col.innerHTML=`
      <div class="card region-card shadow-sm h-100">
        <img src="${region.image}" class="card-img-top" alt="${region.name}">
        <div class="card-body d-flex flex-column">
          <h5 class="card-title">${region.name}</h5>
          <div class="description">${region.description||"No description available."}
          <div class="mt-auto">
            <span class="btn btn-outline-dark rounded-pill" onclick="showPlaces('${region.name}')">Explore Places</span>
          </div>
        </div>
      </div>
    `;
    container.appendChild(col);
  });
}

function showPlaces(regionName){
  const region = regionsData.find(r=>r.name===regionName);
  if(!region) return;
  content.innerHTML=`
    <div class="d-flex align-items-center justify-content-between flex-wrap gap-2 mb-2">
      <h2 class="section-title m-0">${region.name}</h2>
      <span class="btn btn-outline-dark rounded-pill" onclick="showRegions()">Back to all regions</span>
    </div>
    <div class="row g-4" id="places-container"></div>
  `;
  const container=document.getElementById("places-container");
  region.places?.forEach(place=>{
    const col=document.createElement("div");
    col.className="col-md-6 col-lg-4";
    col.innerHTML=`
      <div class="card place-card shadow-sm h-100">
        <img src="${place.image}" class="card-img-top" alt="${place.name}">
        <div class="card-body d-flex flex-column">
          <h5 class="card-title">${place.name}</h5>
          <div class="description">${place.description||"No description available."}
          <div class="mt-auto">
        <span class="btn btn-outline-dark rounded-pill" onclick="showPlaceDetail('${regionName}','${place.name}')">Detail</span>

          </div>
        </div>
      </div>
    `;
    container.appendChild(col);
  });
}

function showPlaceDetail(regionName,placeName){
  window.location.href=`detail.html?region=${encodeURIComponent(regionName)}&place=${encodeURIComponent(placeName)}`;
}
// --- SEARCH FUNCTIONALITY ---
searchInput.addEventListener("input", function () {
  const q = this.value.trim().toLowerCase();
  searchDropdown.innerHTML = "";
  if (!q) return (searchDropdown.style.display = "none");

  const filtered = destinations.filter(d => d.name.toLowerCase().includes(q));
  if (!filtered.length) filtered.push({ name: "No results found", type: "none" });

  filtered.forEach(item => {
    const li = document.createElement("li");
    li.className = "list-group-item d-flex align-items-center";
    li.innerHTML =
      item.type === "none"
        ? item.name
        : `
        <img src="${item.image}" class="rounded-circle me-2" width="40" height="40" alt="${item.name}">
        <div>
          <span class="badge bg-${item.type === "region" ? "primary" : "success"} me-2">
            ${item.type === "region" ? "State" : "Place"}
          </span>
          ${item.name}<br>
          <small class="text-muted">${item.region || ""}</small>
        </div>
      `;
    if (item.type !== "none") li.addEventListener("click", () => redirectTo(item));
    searchDropdown.appendChild(li);
  });

  searchDropdown.style.display = "block";
});

// --- PRESS ENTER TO SEARCH ---
searchInput.addEventListener("keydown", function (event) {
  if (event.key === "Enter") {
    event.preventDefault(); // stop form submission
    const query = this.value.trim().toLowerCase();
    if (!query) return;

    // Find the best matching destination or place
    const match =
      destinations.find(d => d.name.toLowerCase() === query) ||
      destinations.find(d => d.name.toLowerCase().includes(query));

    if (match) {
      redirectTo(match);
    } else {
      alert("No matching destination found!");
      searchDropdown.style.display = "none";
    }
  }
});

// --- REDIRECT FUNCTION ---
function redirectTo(item) {
  if (item.type === "region") {
    showPlaces(item.name);
  } else if (item.type === "place") {
    showPlaceDetail(item.region, item.name);
  }
}






// Hide dropdown when clicking outside
document.addEventListener("click", e => {
  if(!searchInput.contains(e.target) && !searchDropdown.contains(e.target)) searchDropdown.style.display="none";
});
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="search.js"></script>

</body>
</html>
